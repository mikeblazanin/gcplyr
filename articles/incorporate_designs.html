<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gcplyr">
<title>Incorporating design information • gcplyr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Incorporating design information">
<meta property="og:description" content="gcplyr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gcplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/gcplyr.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/gcplyr.html">Introduction</a>
    <a class="dropdown-item" href="../articles/import_transform.html">Importing and transforming data</a>
    <a class="dropdown-item" href="../articles/incorporate_designs.html">Incorporating design information</a>
    <a class="dropdown-item" href="../articles/preprocess_plot.html">Pre-processing and plotting data</a>
    <a class="dropdown-item" href="../articles/process.html">Processing data</a>
    <a class="dropdown-item" href="../articles/analyze.html">Analyzing data</a>
    <a class="dropdown-item" href="../articles/noise.html">Dealing with noise</a>
    <a class="dropdown-item" href="../articles/conclusion.html">Statistics, merging other data, and other resources</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mikeblazanin/gcplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Incorporating design information</h1>
                        <h4 data-toc-skip class="author">Mike
Blazanin</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mikeblazanin/gcplyr/blob/HEAD/vignettes/incorporate_designs.Rmd" class="external-link"><code>vignettes/incorporate_designs.Rmd</code></a></small>
      <div class="d-none name"><code>incorporate_designs.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="where-are-we-so-far">Where are we so far?<a class="anchor" aria-label="anchor" href="#where-are-we-so-far"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Introduction: <code><a href="../articles/gcplyr.html">vignette("gcplyr")</a></code>
</li>
<li>Importing and transforming data:
<code><a href="../articles/import_transform.html">vignette("import_transform")</a></code>
</li>
<li>
<strong>Incorporating design information:</strong>
<code><a href="../articles/incorporate_designs.html">vignette("incorporate_designs")</a></code>
</li>
<li>Pre-processing and plotting your data:
<code><a href="../articles/preprocess_plot.html">vignette("preprocess_plot")</a></code>
</li>
<li>Processing your data: <code><a href="../articles/process.html">vignette("process")</a></code>
</li>
<li>Analyzing your data: <code><a href="../articles/analyze.html">vignette("analyze")</a></code>
</li>
<li>Dealing with noise: <code><a href="../articles/noise.html">vignette("noise")</a></code>
</li>
<li>Statistics, merging other data, and other resources:
<code><a href="../articles/conclusion.html">vignette("conclusion")</a></code>
</li>
</ol>
<p>So far, we’ve imported and transformed our measures data into
<code>R</code>. Now we’re going to address how to incorporate our
experimental design.</p>
<p>If you haven’t already, load the necessary packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mikeblazanin.github.io/gcplyr/">gcplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ## </span></span>
<span><span class="co">#&gt; ## gcplyr (Version 1.5.2, Build Date: 2023-05-02)</span></span>
<span><span class="co">#&gt; ## See http://github.com/mikeblazanin/gcplyr for additional documentation</span></span>
<span><span class="co">#&gt; ## Please cite software as:</span></span>
<span><span class="co">#&gt; ##   Blazanin, Michael. 2023. gcplyr: an R package for microbial growth</span></span>
<span><span class="co">#&gt; ##   curve data analysis. bioRxiv doi: 10.1101/2023.04.30.538883</span></span>
<span><span class="co">#&gt; ##</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="including-design-elements">Including design elements<a class="anchor" aria-label="anchor" href="#including-design-elements"></a>
</h2>
<p>We often want to combine information about the experimental design
with our data. <code>gcplyr</code> enables incorporation of design
elements in two ways:</p>
<ol style="list-style-type: decimal">
<li>Designs can be imported from files</li>
<li>Designs can be generated in <code>R</code> using
<code>make_design</code>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="reading-design-elements-from-files">Reading design elements from files<a class="anchor" aria-label="anchor" href="#reading-design-elements-from-files"></a>
</h2>
<p>Users can read block-shaped or tidy-shaped design files:</p>
<ul>
<li>If design files are block-shaped, they can be read with
<code>import_blockdesigns</code>
</li>
<li>If design files are tidy-shaped, they can simply be read with
<code>read_tidys</code>
</li>
</ul>
<div class="section level3">
<h3 id="importing-block-shaped-design-files">Importing block-shaped design files<a class="anchor" aria-label="anchor" href="#importing-block-shaped-design-files"></a>
</h3>
<p>To import block-shaped design files, use
<code>import_blockdesigns</code>, which will return a tidy-shaped
designs data frame (or list of data frames).</p>
<p><code>import_blockdesigns</code> only requires a list of filenames
(or relative file paths) and will return a data.frame (or list of data
frames) in a <strong>tidy format</strong> that you can save in R.</p>
<div class="section level4">
<h4 id="a-basic-example">A basic example<a class="anchor" aria-label="anchor" href="#a-basic-example"></a>
</h4>
<p>Let’s look at an example. First, we need to create an example file
for the sake of this tutorial. <strong>Don’t worry how the below code
works</strong>, just imagine that you’ve created this file in Excel.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">"mydesign.csv"</span>,</span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tr1"</span>, <span class="st">"Tr2"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">48</span><span class="op">)</span>,</span>
<span>             nrow <span class="op">=</span> <span class="fl">8</span>, ncol <span class="op">=</span> <span class="fl">12</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now let’s take a look at what the file looks like:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">print_df</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"mydesign.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span>, colClasses <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;     1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span><span class="co">#&gt; A Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span><span class="co">#&gt; B Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span><span class="co">#&gt; C Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span><span class="co">#&gt; D Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span><span class="co">#&gt; E Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span><span class="co">#&gt; F Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span><span class="co">#&gt; G Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span><span class="co">#&gt; H Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span></code></pre></div>
<p>Here we can see that our design has Treatment 1 on the left-hand side
of the plate (wells in columns 1 through 6), and Treatment 2 on the
right-hand side of the plate (wells in columns 7 through 12). Let’s
import this design using <code>import_blockdesigns</code> saving it with
the column name <code>Treatment_numbers</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_blockdesigns.html">import_blockdesigns</a></span><span class="op">(</span>files <span class="op">=</span> <span class="st">"mydesign.csv"</span>, </span>
<span>                                 block_names <span class="op">=</span> <span class="st">"Treatment_numbers"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_design</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Well Treatment_numbers</span></span>
<span><span class="co">#&gt; 1    A1               Tr1</span></span>
<span><span class="co">#&gt; 2    A2               Tr1</span></span>
<span><span class="co">#&gt; 3    A3               Tr1</span></span>
<span><span class="co">#&gt; 4    A4               Tr1</span></span>
<span><span class="co">#&gt; 5    A5               Tr1</span></span>
<span><span class="co">#&gt; 6    A6               Tr1</span></span>
<span><span class="co">#&gt; 7    A7               Tr2</span></span>
<span><span class="co">#&gt; 8    A8               Tr2</span></span>
<span><span class="co">#&gt; 9    A9               Tr2</span></span>
<span><span class="co">#&gt; 10  A10               Tr2</span></span>
<span><span class="co">#&gt; 11  A11               Tr2</span></span>
<span><span class="co">#&gt; 12  A12               Tr2</span></span>
<span><span class="co">#&gt; 13   B1               Tr1</span></span>
<span><span class="co">#&gt; 14   B2               Tr1</span></span>
<span><span class="co">#&gt; 15   B3               Tr1</span></span>
<span><span class="co">#&gt; 16   B4               Tr1</span></span>
<span><span class="co">#&gt; 17   B5               Tr1</span></span>
<span><span class="co">#&gt; 18   B6               Tr1</span></span>
<span><span class="co">#&gt; 19   B7               Tr2</span></span>
<span><span class="co">#&gt; 20   B8               Tr2</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="importing-multiple-block-shaped-design-elements">Importing multiple block-shaped design elements<a class="anchor" aria-label="anchor" href="#importing-multiple-block-shaped-design-elements"></a>
</h4>
<p>What do you do if you have multiple designs? For instance, what if
you have several strains each in several treatments? In that case,
simply save each design component as a separate file, and import them
all in one go with <code>import_blockdesigns</code>.</p>
<p>First, let’s create another example designs file. Again,
<strong>don’t worry how the below code works</strong>, just imagine that
you’ve created this file in Excel.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">"mydesign2.csv"</span>,</span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"StrA"</span>, <span class="st">"StrB"</span>, <span class="st">"StrC"</span>, <span class="st">"StrD"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">24</span><span class="op">)</span>,</span>
<span>             nrow <span class="op">=</span> <span class="fl">8</span>, ncol <span class="op">=</span> <span class="fl">12</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>             byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now let’s take a look at what the file looks like:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">print_df</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"mydesign2.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span>, colClasses <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;      1    2    3    4    5    6    7    8    9   10   11   12</span></span>
<span><span class="co">#&gt; A StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA</span></span>
<span><span class="co">#&gt; B StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA</span></span>
<span><span class="co">#&gt; C StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB</span></span>
<span><span class="co">#&gt; D StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB</span></span>
<span><span class="co">#&gt; E StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC</span></span>
<span><span class="co">#&gt; F StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC</span></span>
<span><span class="co">#&gt; G StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD</span></span>
<span><span class="co">#&gt; H StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD</span></span></code></pre></div>
<p>Here we can see that our design has Strain A in the first two rows,
Strain B in the next two rows, and so on.</p>
<p>Let’s now import both designs using <code>import_blockdesigns</code>,
saving them to columns named <code>Treatment_numbers</code> and
<code>Strain_letters</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/import_blockdesigns.html">import_blockdesigns</a></span><span class="op">(</span>files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mydesign.csv"</span>, <span class="st">"mydesign2.csv"</span><span class="op">)</span>, </span>
<span>                      block_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment_numbers"</span>, <span class="st">"Strain_letters"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_design</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Well Treatment_numbers Strain_letters</span></span>
<span><span class="co">#&gt; 1    A1               Tr1           StrA</span></span>
<span><span class="co">#&gt; 2    A2               Tr1           StrA</span></span>
<span><span class="co">#&gt; 3    A3               Tr1           StrA</span></span>
<span><span class="co">#&gt; 4    A4               Tr1           StrA</span></span>
<span><span class="co">#&gt; 5    A5               Tr1           StrA</span></span>
<span><span class="co">#&gt; 6    A6               Tr1           StrA</span></span>
<span><span class="co">#&gt; 7    A7               Tr2           StrA</span></span>
<span><span class="co">#&gt; 8    A8               Tr2           StrA</span></span>
<span><span class="co">#&gt; 9    A9               Tr2           StrA</span></span>
<span><span class="co">#&gt; 10  A10               Tr2           StrA</span></span>
<span><span class="co">#&gt; 11  A11               Tr2           StrA</span></span>
<span><span class="co">#&gt; 12  A12               Tr2           StrA</span></span>
<span><span class="co">#&gt; 13   B1               Tr1           StrA</span></span>
<span><span class="co">#&gt; 14   B2               Tr1           StrA</span></span>
<span><span class="co">#&gt; 15   B3               Tr1           StrA</span></span>
<span><span class="co">#&gt; 16   B4               Tr1           StrA</span></span>
<span><span class="co">#&gt; 17   B5               Tr1           StrA</span></span>
<span><span class="co">#&gt; 18   B6               Tr1           StrA</span></span>
<span><span class="co">#&gt; 19   B7               Tr2           StrA</span></span>
<span><span class="co">#&gt; 20   B8               Tr2           StrA</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="importing-tidy-shaped-design-files">Importing tidy-shaped design files<a class="anchor" aria-label="anchor" href="#importing-tidy-shaped-design-files"></a>
</h3>
<p>You can import tidy-shaped designs with <code>read_tidys</code>.</p>
<p><code>read_tidys</code> only requires a filename (or vector of
filenames, or relative file paths) and will return a
<code>data.frame</code> (or list of data.frames) that you can save in
R.</p>
<p>Once these design elements have been read into the <code>R</code>
environment, you won’t need to transform them. So you can skip down to
learning how to merge them with your data in the <strong><a href="#merging-spectrophotometric-and-design-data">Merging
spectrophotometric and design data</a></strong> section.</p>
</div>
</div>
<div class="section level2">
<h2 id="generating-designs-in-r">Generating designs in R<a class="anchor" aria-label="anchor" href="#generating-designs-in-r"></a>
</h2>
<p>If you’d rather make your design data.frames in R,
<code>make_design</code> can create:</p>
<ul>
<li>block-shaped data.frames with your design information (for saving to
files)</li>
<li>tidy-shaped data.frames with your design information (for saving to
files and merging with tidy-shaped data)</li>
</ul>
<div class="section level3">
<h3 id="an-example-with-a-single-design">An example with a single design<a class="anchor" aria-label="anchor" href="#an-example-with-a-single-design"></a>
</h3>
<p>Let’s start with a simple design.</p>
<p>Imagine you have a 96 well plate (12 columns and 8 rows) with a
different bacterial strain in each row, leaving the first and last rows
and columns empty.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="16%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="5%">
<col width="16%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
<th>…</th>
<th>Column 11</th>
<th>Column 12</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>Blank</td>
<td>Strain #1</td>
<td>Strain #1</td>
<td>…</td>
<td>Strain #1</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>Row B</td>
<td>Blank</td>
<td>Strain #2</td>
<td>Strain #2</td>
<td>…</td>
<td>Strain #2</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="odd">
<td>Row G</td>
<td>Blank</td>
<td>Strain #5</td>
<td>Strain #5</td>
<td>…</td>
<td>Strain #5</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>Blank</td>
<td>Strain #6</td>
<td>Strain #6</td>
<td>…</td>
<td>Strain #6</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
</tbody>
</table>
<p>Typing a design like this manually into a spreadsheet can be tedious.
But generating it with <code>make_design</code> is easier.</p>
<p><code>make_design</code> first needs some general information, like
the <code>nrows</code> and <code>ncols</code> in the plate, and the
<code>output_format</code> you’d like (typically <code>blocks</code> or
<code>tidy</code>).</p>
<p>Then, for each different design component, <code>make_design</code>
needs five different pieces of information:</p>
<ul>
<li>a vector containing the possible values</li>
<li>a vector specifying which rows these values should be applied
to</li>
<li>a vector specifying which columns these values should be applied
to</li>
<li>a string or vector of the pattern of these values</li>
<li>a Boolean for whether this pattern should be filled byrow (defaults
to TRUE)</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"blocks"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>, </span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span>, <span class="st">"Str3"</span>, <span class="st">"Str4"</span>, <span class="st">"Str5"</span>, <span class="st">"Str6"</span><span class="op">)</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>                  <span class="st">"123456"</span>,</span>
<span>                  <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>So for our example above, we can see:</p>
<ul>
<li>the possible values are
<code>c("Strain 1", "Strain 2", "Strain 3", "Strain 4", "Strain 5", "Strain 6")</code>
</li>
<li>the rows these values should be applied to are <code>2:7</code>
</li>
<li>the columns these values should be applied to are
<code>2:11</code>
</li>
<li>the pattern these values should be filled in by is
<code>"123456"</code>
</li>
<li>and these values should <em>not</em> be filled by row (they should
be filled by column)</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; B NA "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" NA</span></span>
<span><span class="co">#&gt; C NA "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" NA</span></span>
<span><span class="co">#&gt; D NA "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" NA</span></span>
<span><span class="co">#&gt; E NA "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" NA</span></span>
<span><span class="co">#&gt; F NA "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" NA</span></span>
<span><span class="co">#&gt; G NA "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt; "Bacteria"</span></span></code></pre></div>
<p>This produces a <code>data.frame</code> with <code>Bacteria</code> as
the <code>block_name</code> in the metadata. If we save this design to a
file or transform it to tidy-shaped, this <code>block_name</code>
metadata will come in handy.</p>
</div>
<div class="section level3">
<h3 id="a-few-notes-on-the-pattern">A few notes on the pattern<a class="anchor" aria-label="anchor" href="#a-few-notes-on-the-pattern"></a>
</h3>
<p>The pattern in <code>make_design</code> is flexible to make it easy
to input designs.</p>
<p><strong>The “0” character is reserved for <code>NA</code>
values</strong>, and can be put into your pattern anywhere you’d like to
have the value be <code>NA</code></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"blocks"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>, </span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span>, <span class="st">"Str3"</span>, </span>
<span>                    <span class="st">"Str4"</span>, <span class="st">"Str5"</span>, <span class="st">"Str6"</span><span class="op">)</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>                  <span class="st">"123056"</span>,</span>
<span>                  <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">my_design_blk</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; B NA "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" NA</span></span>
<span><span class="co">#&gt; C NA "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" NA</span></span>
<span><span class="co">#&gt; D NA "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" NA</span></span>
<span><span class="co">#&gt; E NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; F NA "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" NA</span></span>
<span><span class="co">#&gt; G NA "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt; "Bacteria"</span></span></code></pre></div>
<p>In the previous examples, I used the numbers 1 through 6 to
correspond to our values. If you have more than 9 values, you can use
letters too. By default, the order is numbers first, then uppercase
letters, then lowercase letters (so “A” is the 10th index). However, if
you’d like to only use letters, you can simply specify a different
<code>lookup_tbl_start</code> so that <code>make_design</code> knows
what letter you’re using as the <code>1</code> index.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"blocks"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>, lookup_tbl_start <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span>, <span class="st">"Str3"</span>, <span class="st">"Str4"</span>, <span class="st">"Str5"</span>, <span class="st">"Str6"</span><span class="op">)</span>,</span>
<span>    <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>    <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>    <span class="st">"ABCDEF"</span>,</span>
<span>    <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>You can also specify the pattern as a vector rather than a
string.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"blocks"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span>, <span class="st">"Str3"</span>, <span class="st">"Str4"</span>, <span class="st">"Str5"</span>, <span class="st">"Str6"</span><span class="op">)</span>,</span>
<span>    <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>    <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span>,</span>
<span>    <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="continuing-with-the-example-multiple-designs">Continuing with the example: multiple designs<a class="anchor" aria-label="anchor" href="#continuing-with-the-example-multiple-designs"></a>
</h3>
<p>Now let’s return to our example growth curve experiment. <em>In
addition</em> to having a different bacterial strain in each row, we now
also have a different media in each column of the plate.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="16%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="5%">
<col width="16%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
<th>…</th>
<th>Column 11</th>
<th>Column 12</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>Blank</td>
<td>Media #1</td>
<td>Media #2</td>
<td>…</td>
<td>Media #10</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>Blank</td>
<td>Media #1</td>
<td>Media #2</td>
<td>…</td>
<td>Media #10</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
</tbody>
</table>
<p>We can generate both designs with <code>make_design</code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"blocks"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>, lookup_tbl_start <span class="op">=</span> <span class="st">"a"</span>,</span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span>, <span class="st">"Str3"</span>, </span>
<span>                    <span class="st">"Str4"</span>, <span class="st">"Str5"</span>, <span class="st">"Str6"</span><span class="op">)</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>                  <span class="st">"abcdef"</span>,</span>
<span>                  <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  Media <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Med1"</span>, <span class="st">"Med2"</span>, <span class="st">"Med3"</span>,</span>
<span>                 <span class="st">"Med4"</span>, <span class="st">"Med5"</span>, <span class="st">"Med6"</span>,</span>
<span>                 <span class="st">"Med7"</span>, <span class="st">"Med8"</span>, <span class="st">"Med9"</span>,</span>
<span>                 <span class="st">"Med10"</span>, <span class="st">"Med11"</span>, <span class="st">"Med12"</span><span class="op">)</span>,</span>
<span>               <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>               <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>               <span class="st">"abcdefghij"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">my_design_blk</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; B NA "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" NA</span></span>
<span><span class="co">#&gt; C NA "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" NA</span></span>
<span><span class="co">#&gt; D NA "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" NA</span></span>
<span><span class="co">#&gt; E NA "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" "Str4" NA</span></span>
<span><span class="co">#&gt; F NA "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" NA</span></span>
<span><span class="co">#&gt; G NA "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt; "Bacteria" </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [[2]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11      12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA      NA</span></span>
<span><span class="co">#&gt; B NA "Med1" "Med2" "Med3" "Med4" "Med5" "Med6" "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; C NA "Med1" "Med2" "Med3" "Med4" "Med5" "Med6" "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; D NA "Med1" "Med2" "Med3" "Med4" "Med5" "Med6" "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; E NA "Med1" "Med2" "Med3" "Med4" "Med5" "Med6" "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; F NA "Med1" "Med2" "Med3" "Med4" "Med5" "Med6" "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; G NA "Med1" "Med2" "Med3" "Med4" "Med5" "Med6" "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA      NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt;    "Media"</span></span></code></pre></div>
<p>However, the real strength of <code>make_design</code> is that it is
not limited to simple alternating patterns. <code>make_design</code> can
use irregular patterns too, replicating them as needed to fill all the
wells.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"blocks"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>, lookup_tbl_start <span class="op">=</span> <span class="st">"a"</span>,</span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span><span class="op">)</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>                  <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>                  <span class="st">"abaaabbbab"</span>,</span>
<span>                  <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  Media <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Med1"</span>, <span class="st">"Med2"</span>, <span class="st">"Med3"</span><span class="op">)</span>,</span>
<span>               <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>,</span>
<span>               <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>,</span>
<span>               <span class="st">"aabbbc000abc"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_design_blk</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; B NA "Str1" "Str2" "Str1" "Str1" "Str1" "Str1" "Str2" "Str1" "Str1" "Str1" NA</span></span>
<span><span class="co">#&gt; C NA "Str2" "Str2" "Str1" "Str2" "Str2" "Str2" "Str2" "Str1" "Str2" "Str2" NA</span></span>
<span><span class="co">#&gt; D NA "Str1" "Str1" "Str1" "Str1" "Str2" "Str1" "Str1" "Str1" "Str1" "Str2" NA</span></span>
<span><span class="co">#&gt; E NA "Str1" "Str2" "Str2" "Str2" "Str2" "Str1" "Str2" "Str2" "Str2" "Str2" NA</span></span>
<span><span class="co">#&gt; F NA "Str1" "Str1" "Str2" "Str1" "Str1" "Str1" "Str1" "Str2" "Str1" "Str1" NA</span></span>
<span><span class="co">#&gt; G NA "Str2" "Str2" "Str2" "Str1" "Str2" "Str2" "Str2" "Str2" "Str1" "Str2" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt; "Bacteria" </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [[2]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; B NA "Med1" "Med1" "Med2" "Med2" "Med2" "Med3" NA     NA     NA     "Med1" NA</span></span>
<span><span class="co">#&gt; C NA "Med2" "Med3" "Med1" "Med1" "Med2" "Med2" "Med2" "Med3" NA     NA     NA</span></span>
<span><span class="co">#&gt; D NA NA     "Med1" "Med2" "Med3" "Med1" "Med1" "Med2" "Med2" "Med2" "Med3" NA</span></span>
<span><span class="co">#&gt; E NA NA     NA     NA     "Med1" "Med2" "Med3" "Med1" "Med1" "Med2" "Med2" NA</span></span>
<span><span class="co">#&gt; F NA "Med2" "Med3" NA     NA     NA     "Med1" "Med2" "Med3" "Med1" "Med1" NA</span></span>
<span><span class="co">#&gt; G NA "Med2" "Med2" "Med2" "Med3" NA     NA     NA     "Med1" "Med2" "Med3" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt;    "Media"</span></span></code></pre></div>
<p>There is also an optional helper function called
<code>make_designpattern</code>. <code>make_designpattern</code> just
reminds us what arguments are necessary for each design. For
example:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_blk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"blocks"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>, lookup_tbl_start <span class="op">=</span> <span class="st">"a"</span>,</span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span>, <span class="st">"Str3"</span>, </span>
<span>               <span class="st">"Str4"</span>, <span class="st">"Str5"</span>, <span class="st">"Str6"</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>, cols <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>, pattern <span class="op">=</span> <span class="st">"abc0ef"</span>,</span>
<span>    byrow <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  Media <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Med1"</span>, <span class="st">"Med2"</span>, <span class="st">"Med3"</span>,</span>
<span>               <span class="st">"Med4"</span>, <span class="st">"Med5"</span>, <span class="st">"Med6"</span>,</span>
<span>               <span class="st">"Med7"</span>, <span class="st">"Med8"</span>, <span class="st">"Med9"</span>,</span>
<span>               <span class="st">"Med10"</span>, <span class="st">"Med11"</span>, <span class="st">"Med12"</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>, cols <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>, pattern <span class="op">=</span> <span class="st">"abcde0ghij"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_design_blk</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; B NA "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" "Str1" NA</span></span>
<span><span class="co">#&gt; C NA "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" "Str2" NA</span></span>
<span><span class="co">#&gt; D NA "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" "Str3" NA</span></span>
<span><span class="co">#&gt; E NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; F NA "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" "Str5" NA</span></span>
<span><span class="co">#&gt; G NA "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" "Str6" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt; "Bacteria" </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [[2]]$data</span></span>
<span><span class="co">#&gt;   1  2      3      4      5      6      7  8      9      10     11      12</span></span>
<span><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA NA     NA     NA     NA      NA</span></span>
<span><span class="co">#&gt; B NA "Med1" "Med2" "Med3" "Med4" "Med5" NA "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; C NA "Med1" "Med2" "Med3" "Med4" "Med5" NA "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; D NA "Med1" "Med2" "Med3" "Med4" "Med5" NA "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; E NA "Med1" "Med2" "Med3" "Med4" "Med5" NA "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; F NA "Med1" "Med2" "Med3" "Med4" "Med5" NA "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; G NA "Med1" "Med2" "Med3" "Med4" "Med5" NA "Med7" "Med8" "Med9" "Med10" NA</span></span>
<span><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA NA     NA     NA     NA      NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]$metadata</span></span>
<span><span class="co">#&gt; block_name </span></span>
<span><span class="co">#&gt;    "Media"</span></span></code></pre></div>
<p><strong>For merging our designs with plate reader data, we need it
tidy-shaped</strong>, so we just need to change the
<code>output_format</code> to <code>tidy</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_design_tdy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  output_format <span class="op">=</span> <span class="st">"tidy"</span>,</span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>, lookup_tbl_start <span class="op">=</span> <span class="st">"a"</span>,</span>
<span>  Bacteria <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Str1"</span>, <span class="st">"Str2"</span>, <span class="st">"Str3"</span>, </span>
<span>               <span class="st">"Str4"</span>, <span class="st">"Str5"</span>, <span class="st">"Str6"</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>, cols <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>, pattern <span class="op">=</span> <span class="st">"abc0ef"</span>,</span>
<span>    byrow <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  Media <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Med1"</span>, <span class="st">"Med2"</span>, <span class="st">"Med3"</span>,</span>
<span>               <span class="st">"Med4"</span>, <span class="st">"Med5"</span>, <span class="st">"Med6"</span>,</span>
<span>               <span class="st">"Med7"</span>, <span class="st">"Med8"</span>, <span class="st">"Med9"</span>,</span>
<span>               <span class="st">"Med10"</span>, <span class="st">"Med11"</span>, <span class="st">"Med12"</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">7</span>, cols <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">11</span>, pattern <span class="op">=</span> <span class="st">"abcde0ghij"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_design_tdy</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Well Bacteria Media</span></span>
<span><span class="co">#&gt; 1    A1     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2    A2     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3    A3     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4    A4     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5    A5     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6    A6     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7    A7     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 8    A8     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 9    A9     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 10  A10     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 11  A11     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 12  A12     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 13   B1     &lt;NA&gt;  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 14   B2     Str1  Med1</span></span>
<span><span class="co">#&gt; 15   B3     Str1  Med2</span></span>
<span><span class="co">#&gt; 16   B4     Str1  Med3</span></span>
<span><span class="co">#&gt; 17   B5     Str1  Med4</span></span>
<span><span class="co">#&gt; 18   B6     Str1  Med5</span></span>
<span><span class="co">#&gt; 19   B7     Str1  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 20   B8     Str1  Med7</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="saving-designs-to-files">Saving designs to files<a class="anchor" aria-label="anchor" href="#saving-designs-to-files"></a>
</h3>
<p>If you’d like to save the designs you’ve created with
<code>make_design</code> to files, you just need to decide if you’d like
them tidy-shaped or block-shaped. Both formats can easily be read back
into <code>R</code> by <code>gcplyr</code>.</p>
<div class="section level4">
<h4 id="saving-tidy-shaped-designs">Saving tidy-shaped designs<a class="anchor" aria-label="anchor" href="#saving-tidy-shaped-designs"></a>
</h4>
<p>These design files will be less human-readable, but easier to import
and merge. Additionally, tidy-shaped files are often better for data
repositories, like Dryad. To save tidy-shaped designs, simply use the
built-in <code>write.csv</code> function.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#See the previous section where we created my_design_tdy</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">my_design_tdy</span>, file <span class="op">=</span> <span class="st">"tidy_design.csv"</span>,</span>
<span>          row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="saving-block-shaped-designs">Saving block-shaped designs<a class="anchor" aria-label="anchor" href="#saving-block-shaped-designs"></a>
</h4>
<p>These design files will be more human-readable but slightly more
computationally involved to import and merge. For these, use the
<code>gcplyr</code> function <code>write_blocks</code>. Typically,
you’ll use <code>write_blocks</code> to save files in one of two
formats:</p>
<ul>
<li>
<code>multiple</code> - each block will be saved to its own
<code>.csv</code> file</li>
<li>
<code>single</code> - all the blocks will be saved to a single
<code>.csv</code> file, with an empty row in between them</li>
</ul>
<div class="section level5">
<h5 id="saving-block-shaped-designs-to-multiple-files">Saving block-shaped designs to multiple files<a class="anchor" aria-label="anchor" href="#saving-block-shaped-designs-to-multiple-files"></a>
</h5>
<p>The default setting for <code>write_blocks</code> is
<code>output_format = 'multiple'</code>. This creates one
<code>csv</code> file for each block. If we set
<code>file = NULL</code>, the default is to name the files according to
the <code>block_names</code> in the metadata.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See the previous section where we created my_design_blk</span></span>
<span><span class="fu"><a href="../reference/write_blocks.html">write_blocks</a></span><span class="op">(</span><span class="va">my_design_blk</span>, file <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's see what the files look like</span></span>
<span><span class="fu">print_df</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"Bacteria.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span>, colClasses <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   1    2    3    4    5    6    7    8    9   10   11 12</span></span>
<span><span class="co">#&gt; A                                                       </span></span>
<span><span class="co">#&gt; B   Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1   </span></span>
<span><span class="co">#&gt; C   Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2   </span></span>
<span><span class="co">#&gt; D   Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3   </span></span>
<span><span class="co">#&gt; E                                                       </span></span>
<span><span class="co">#&gt; F   Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5   </span></span>
<span><span class="co">#&gt; G   Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6   </span></span>
<span><span class="co">#&gt; H</span></span>
<span></span>
<span><span class="fu">print_df</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"Media.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span>, colClasses <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   1    2    3    4    5    6 7    8    9   10    11 12</span></span>
<span><span class="co">#&gt; A                                                     </span></span>
<span><span class="co">#&gt; B   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt; C   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt; D   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt; E   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt; F   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt; G   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt; H</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="saving-block-shaped-designs-to-a-single-file">Saving block-shaped designs to a single file<a class="anchor" aria-label="anchor" href="#saving-block-shaped-designs-to-a-single-file"></a>
</h5>
<p>The other setting for <code>write_blocks</code> is
<code>output_format = 'single'</code>. This creates a single
<code>csv</code> file that contains all the blocks, putting metadata
like <code>block_names</code> in rows that precede each block.</p>
<p>Let’s take a look what the <code>single</code> output format looks
like:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See the previous section where we created my_design_blk</span></span>
<span><span class="fu"><a href="../reference/write_blocks.html">write_blocks</a></span><span class="op">(</span><span class="va">my_design_blk</span>, file <span class="op">=</span> <span class="st">"Design.csv"</span>, output_format <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's see what the file looks like</span></span>
<span><span class="fu">print_df</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"Design.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span>, colClasses <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; block_name Bacteria                                                      </span></span>
<span><span class="co">#&gt;                   1    2    3    4    5    6    7    8    9   10    11 12</span></span>
<span><span class="co">#&gt;          A                                                               </span></span>
<span><span class="co">#&gt;          B          Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1  Str1   </span></span>
<span><span class="co">#&gt;          C          Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2  Str2   </span></span>
<span><span class="co">#&gt;          D          Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3  Str3   </span></span>
<span><span class="co">#&gt;          E                                                               </span></span>
<span><span class="co">#&gt;          F          Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5  Str5   </span></span>
<span><span class="co">#&gt;          G          Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6  Str6   </span></span>
<span><span class="co">#&gt;          H                                                               </span></span>
<span><span class="co">#&gt;                                                                          </span></span>
<span><span class="co">#&gt; block_name    Media                                                      </span></span>
<span><span class="co">#&gt;                   1    2    3    4    5    6    7    8    9   10    11 12</span></span>
<span><span class="co">#&gt;          A                                                               </span></span>
<span><span class="co">#&gt;          B          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt;          C          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt;          D          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt;          E          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt;          F          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt;          G          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span><span class="co">#&gt;          H</span></span></code></pre></div>
<p>Here we can see all our design information has been saved to a single
file, and the metadata has been added in rows before each block.</p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="merging-spectrophotometric-and-design-data">Merging spectrophotometric and design data<a class="anchor" aria-label="anchor" href="#merging-spectrophotometric-and-design-data"></a>
</h2>
<p>Once we have both our design and data in the<code>R</code>environment
and tidy-shaped, we can merge them using <code>merge_dfs</code>.</p>
<p>For this, we’ll use the data in the
<code>example_widedata_noiseless</code> dataset that is included with
<code>gcplyr</code>, and which was the source for our previous examples
with <code>import_blockmeasures</code> and <code>read_wides</code>.</p>
<p>In the <code>example_widedata_noiseless</code> dataset, we have 48
different bacterial strains. The left side of the plate has all 48
strains in a single well each, and the right side of the plate also has
all 48 strains in a single well each:</p>
<table class="table">
<colgroup>
<col width="19%">
<col width="17%">
<col width="6%">
<col width="17%">
<col width="17%">
<col width="6%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>…</th>
<th>Column 6</th>
<th>Column 7</th>
<th>…</th>
<th>Column 12</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>Strain #1</td>
<td>…</td>
<td>Strain #6</td>
<td>Strain #1</td>
<td>…</td>
<td>Strain #6</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>Strain #7</td>
<td>…</td>
<td>Strain #12</td>
<td>Strain #7</td>
<td>…</td>
<td>Strain #12</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>Strain #37</td>
<td>…</td>
<td>Strain #42</td>
<td>Strain #37</td>
<td>…</td>
<td>Strain #42</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>Strain #43</td>
<td>…</td>
<td>Strain #48</td>
<td>Strain #43</td>
<td>…</td>
<td>Strain #48</td>
</tr>
</tbody>
</table>
<p>Then, on the right hand side of the plate a phage was also inoculated
(while the left hand side remained bacteria-only):</p>
<table class="table">
<colgroup>
<col width="19%">
<col width="17%">
<col width="6%">
<col width="17%">
<col width="17%">
<col width="6%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>…</th>
<th>Column 6</th>
<th>Column 7</th>
<th>…</th>
<th>Column 12</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
</tbody>
</table>
<p>Let’s generate our design:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_design.html">make_design</a></span><span class="op">(</span></span>
<span>  nrows <span class="op">=</span> <span class="fl">8</span>, ncols <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  <span class="st">"Bacteria_strain"</span> <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Strain"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">48</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, cols <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>    pattern <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">48</span>,</span>
<span>    byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="st">"Bacteria_strain"</span> <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Strain"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">48</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, cols <span class="op">=</span> <span class="fl">7</span><span class="op">:</span><span class="fl">12</span>,</span>
<span>    pattern <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">48</span>,</span>
<span>    byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="st">"Phage"</span> <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"No Phage"</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, cols <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>    pattern <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span>,</span>
<span>  <span class="st">"Phage"</span> <span class="op">=</span> <span class="fu"><a href="../reference/make_designpattern.html">make_designpattern</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Phage Added"</span><span class="op">)</span>,</span>
<span>    rows <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, cols <span class="op">=</span> <span class="fl">7</span><span class="op">:</span><span class="fl">12</span>,</span>
<span>    pattern <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Here’s what the resulting data.frame looks like:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_design</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Well Bacteria_strain       Phage</span></span>
<span><span class="co">#&gt; 1    A1        Strain 1    No Phage</span></span>
<span><span class="co">#&gt; 2    A2        Strain 2    No Phage</span></span>
<span><span class="co">#&gt; 3    A3        Strain 3    No Phage</span></span>
<span><span class="co">#&gt; 4    A4        Strain 4    No Phage</span></span>
<span><span class="co">#&gt; 5    A5        Strain 5    No Phage</span></span>
<span><span class="co">#&gt; 6    A6        Strain 6    No Phage</span></span>
<span><span class="co">#&gt; 7    A7        Strain 1 Phage Added</span></span>
<span><span class="co">#&gt; 8    A8        Strain 2 Phage Added</span></span>
<span><span class="co">#&gt; 9    A9        Strain 3 Phage Added</span></span>
<span><span class="co">#&gt; 10  A10        Strain 4 Phage Added</span></span>
<span><span class="co">#&gt; 11  A11        Strain 5 Phage Added</span></span>
<span><span class="co">#&gt; 12  A12        Strain 6 Phage Added</span></span>
<span><span class="co">#&gt; 13   B1        Strain 7    No Phage</span></span>
<span><span class="co">#&gt; 14   B2        Strain 8    No Phage</span></span>
<span><span class="co">#&gt; 15   B3        Strain 9    No Phage</span></span>
<span><span class="co">#&gt; 16   B4       Strain 10    No Phage</span></span>
<span><span class="co">#&gt; 17   B5       Strain 11    No Phage</span></span>
<span><span class="co">#&gt; 18   B6       Strain 12    No Phage</span></span>
<span><span class="co">#&gt; 19   B7        Strain 7 Phage Added</span></span>
<span><span class="co">#&gt; 20   B8        Strain 8 Phage Added</span></span></code></pre></div>
<p>Now let’s transform the <code>example_widedata_noiseless</code> to
tidy-shaped.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_tidydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trans_wide_to_tidy.html">trans_wide_to_tidy</a></span><span class="op">(</span><span class="va">example_widedata_noiseless</span>,</span>
<span>                                       id_cols <span class="op">=</span> <span class="st">"Time"</span><span class="op">)</span></span></code></pre></div>
<p>And finally, we merge the two using <code>merge_dfs</code>, saving
the result to <code>ex_dat_mrg</code>, short for example_data_merged.
<code>merge_dfs</code> merges using columns with the same name between
the two data.frames.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_dat_mrg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_dfs.html">merge_dfs</a></span><span class="op">(</span><span class="va">example_tidydata</span>, <span class="va">example_design</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(Well)`</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ex_dat_mrg</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Time Well Measurements Bacteria_strain    Phage</span></span>
<span><span class="co">#&gt; 1    0   A1        0.002        Strain 1 No Phage</span></span>
<span><span class="co">#&gt; 2    0   B1        0.002        Strain 7 No Phage</span></span>
<span><span class="co">#&gt; 3    0   C1        0.002       Strain 13 No Phage</span></span>
<span><span class="co">#&gt; 4    0   D1        0.002       Strain 19 No Phage</span></span>
<span><span class="co">#&gt; 5    0   E1        0.002       Strain 25 No Phage</span></span>
<span><span class="co">#&gt; 6    0   F1        0.002       Strain 31 No Phage</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="whats-next">What’s next?<a class="anchor" aria-label="anchor" href="#whats-next"></a>
</h2>
<p>Now that you’ve merged your data and designs, you can pre-process and
plot your data</p>
<ol style="list-style-type: decimal">
<li>Introduction: <code><a href="../articles/gcplyr.html">vignette("gcplyr")</a></code>
</li>
<li>Importing and transforming data:
<code><a href="../articles/import_transform.html">vignette("import_transform")</a></code>
</li>
<li>Incorporating design information:
<code><a href="../articles/incorporate_designs.html">vignette("incorporate_designs")</a></code>
</li>
<li><strong>Pre-processing and plotting your data:
<code><a href="../articles/preprocess_plot.html">vignette("preprocess_plot")</a></code></strong></li>
<li>Processing your data: <code><a href="../articles/process.html">vignette("process")</a></code>
</li>
<li>Analyzing your data: <code><a href="../articles/analyze.html">vignette("analyze")</a></code>
</li>
<li>Dealing with noise: <code><a href="../articles/noise.html">vignette("noise")</a></code>
</li>
<li>Statistics, merging other data, and other resources:
<code><a href="../articles/conclusion.html">vignette("conclusion")</a></code>
</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://mikeblazanin.wordpress.com" class="external-link">Mike Blazanin</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
