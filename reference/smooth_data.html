<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function calls other functions to smooth growth curve data"><title>Smooth data — smooth_data • gcplyr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Smooth data — smooth_data"><meta property="og:description" content="This function calls other functions to smooth growth curve data"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gcplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/gcplyr.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/gcplyr.html">Introduction</a>
    <a class="dropdown-item" href="../articles/import_transform.html">Importing and transforming data</a>
    <a class="dropdown-item" href="../articles/incorporate_designs.html">Incorporating design information</a>
    <a class="dropdown-item" href="../articles/preprocess_plot.html">Pre-processing and plotting data</a>
    <a class="dropdown-item" href="../articles/process.html">Processing data</a>
    <a class="dropdown-item" href="../articles/analyze.html">Analyzing data</a>
    <a class="dropdown-item" href="../articles/noise.html">Dealing with noise</a>
    <a class="dropdown-item" href="../articles/conclusion.html">Statistics, merging other data, and other resources</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mikeblazanin/gcplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Smooth data</h1>
      <small class="dont-index">Source: <a href="https://github.com/mikeblazanin/gcplyr/blob/HEAD/R/functions.R" class="external-link"><code>R/functions.R</code></a></small>
      <div class="d-none name"><code>smooth_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calls other functions to smooth growth curve data</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">smooth_data</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">sm_method</span>,</span>
<span>  subset_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return_fitobject <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>...</dt>
<dd><p>Arguments passed to <code><a href="https://rdrr.io/r/stats/loess.html" class="external-link">stats::loess</a></code>, <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">mgcv::gam</a></code>,
<code>moving_average</code>, or <code>moving_median</code>. Typically
includes tuning parameter(s), which in some cases are required.
See Details for more information.</p></dd>


<dt>x</dt>
<dd><p>An (optional) vector of predictor values to smooth along (e.g. time)</p></dd>


<dt>y</dt>
<dd><p>A vector of response values to be smoothed (e.g. density). If NULL,
<code>formula</code> and <code>data</code> *must* be provided via <code>...</code></p></dd>


<dt>sm_method</dt>
<dd><p>Argument specifying which smoothing method should
be used to smooth data. Options include 
"moving-average", "moving-median", "loess", and "gam"</p></dd>


<dt>subset_by</dt>
<dd><p>An optional vector as long as <code>y</code>. 
<code>y</code> will be split by the unique values of this vector 
and the derivative for each group will be calculated 
independently of the others.</p>
<p>This provides an internally-implemented approach similar
to <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate</a></code></p></dd>


<dt>return_fitobject</dt>
<dd><p>logical indicating whether entire object returned
by fitting function should be returned. If FALSE,
just fitted values are returned.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If <code>return_fitobject == FALSE:</code></p>



<p>A vector, the same length as <code>y</code>, with the now-smoothed y values</p>
        

<p>If <code>return_fitobject == TRUE:</code></p>

        

<p>A list the same length as unique(subset_by) where each element is
        an object of the same class as returned by the smoothing method
        (typically a named list-like object)</p>
        

<p>Varies by method, but always with a first element named 'fitted'
        containing the smoothed values of the response variable, and a 
        second element named 'residuals' containing the residuals of the
        fitted values and the input values</p>
        

<p>**Note: the first version released after Sep 1, 2023 will change **
        **this behavior** to instead maintain the class of the object 
        returned by the smoothing method. After the change, not all methods 
        will return an object with 'fitted' as the first element and 
        'residuals' as the second element.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For <code>moving_average</code> and <code>moving_median</code>, 
           passing <code>window_width</code> or <code>window_width_n</code> via 
           <code>...</code> is required. <code>window_width</code> sets the width
           of the moving window in units of <code>x</code>, while 
           <code>window_width_n</code> sets the width in units of number
           of data points. Larger values for either will produce more 
           "smoothed" data.</p>           
<p>For <code>loess</code>, the <code>span</code> argument sets the fraction of
           data points that should be included in each calculation. It's
           typically best to specify, since the default of 0.75 is often
           too large for growth curves data. Larger values of <code>span</code> 
           will produce more more "smoothed" data</p>           
<p>For <code>gam</code>, both arguments to <code>gam</code> and <code>s</code> can
           be provided via <code>...</code>. Most frequently, the <code>k</code> 
           argument to <code>s</code> sets the number of "knots" the
           spline-fitting can use. Smaller values will be more "smoothed".</p>           
<p>When using <code>sm_method = "gam"</code>, advanced users may also modify 
           other parameters of <code>s()</code>, including the smoothing basis 
           <code>bs</code>. These bases can be thin plate (<code>bs = "tp"</code>, 
           the default), cubic regressions (<code>bs = "cr"</code>), or many other 
           options (see <code>?mcgv::s</code>). I recommend leaving the default 
           thin plate regressions, whose main drawback is that they are 
           computationally intensive to calculate. For growth curves data, 
           this is unlikely to be relevant.</p>           
<p>As an alternative to passing <code>y</code>, for more advanced needs 
           with <code>loess</code> or <code>gam</code>, <code>formula</code> and <code>data</code> 
           can be passed to <code>smooth_data</code> via the <code>...</code> argument 
           (in lieu of <code>y</code>).</p>         
<p>In this case, the formula should specify the response (e.g. density) 
           and predictors. For <code>gam</code> smoothing, the formula should
           typically be of the format: y ~ s(x), which uses 
           <code><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">mgcv::s</a></code> to smooth the data. The data argument should be a 
           <code>data.frame</code> containing the variables in the formula.
           In such cases, <code>subset_by</code> can still be specified as a vector
           as long as <code>nrow(data)</code></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://mikeblazanin.wordpress.com" class="external-link">Mike Blazanin</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

